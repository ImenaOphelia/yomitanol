from bs4 import BeautifulSoup
import json

# Sample HTML table input
html = '''<table class="cnj"><tbody><tr><th></th><th></th><th></th><th colspan="2">Formas no personales</th></tr><tr><th></th><th></th><th></th><th>Infinitivo</th><th>Gerundio</th></tr><tr><td></td><td></td><td></td><td>bailar</td><td>bailando</td></tr><tr><th></th><th></th><th></th><th>Infinitivo compuesto</th><th>Gerundio compuesto</th></tr><tr><td></td><td></td><td></td><td>haber bailado </td><td>habiendo bailado </td></tr><tr><th></th><th></th><th></th><th colspan="2">Participio</th></tr><tr><td></td><td></td><td></td><td colspan="2">bailado</td></tr><tr><th></th><th></th><th></th><th colspan="2">Indicativo</th></tr><tr><th>Número</th><th>Personas del discurso</th><th>Pronombres personales</th><th>Presente</th><th>Pretérito perfecto compuesto / Antepresente</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>bailo</td><td>he bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailas / bailás</td><td>has bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>baila</td><td>ha bailado </td></tr><tr><td data-g="Singular"></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>baila</td><td>ha bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailamos</td><td>hemos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailáis</td><td>habéis bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailan</td><td>han bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailan</td><td>han bailado </td></tr><tr><th></th><th></th><th></th><th>Pretérito imperfecto / Copretérito</th><th>Pretérito pluscuamperfecto / Antecopretérito</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>bailaba</td><td>había bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailabas</td><td>habías bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>bailaba</td><td>había bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>bailaba</td><td>había bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailábamos</td><td>habíamos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailabais</td><td>habíais bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailaban</td><td>habían bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailaban</td><td>habían bailado </td></tr><tr><th></th><th></th><th></th><th>Pretérito perfecto simple / Pretérito</th><th>Pretérito anterior / Antepretérito</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>bailé</td><td>hube bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailaste</td><td>hubiste bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>bailó</td><td>hubo bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>bailó</td><td>hubo bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailamos</td><td>hubimos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailasteis</td><td>hubisteis bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailaron</td><td>hubieron bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailaron</td><td>hubieron bailado </td></tr><tr><th></th><th></th><th></th><th>Futuro simple / Futuro</th><th>Futuro compuesto / Antefuturo</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>bailaré</td><td>habré bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailarás</td><td>habrás bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>bailará</td><td>habrá bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>bailará</td><td>habrá bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailaremos</td><td>habremos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailaréis</td><td>habréis bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailarán</td><td>habrán bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailarán</td><td>habrán bailado </td></tr><tr><th></th><th></th><th></th><th>Condicional simple / Pospretérito</th><th>Condicional compuesto / Antepospretérito</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>bailaría</td><td>habría bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailarías</td><td>habrías bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>bailaría</td><td>habría bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>bailaría</td><td>habría bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailaríamos</td><td>habríamos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailaríais</td><td>habríais bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailarían</td><td>habrían bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailarían</td><td>habrían bailado </td></tr><tr><th></th><th></th><th></th><th colspan="2">Subjuntivo</th></tr><tr><th>Número</th><th>Personas del discurso</th><th>Pronombres personales</th><th>Presente</th><th>Pretérito perfecto compuesto / Antepresente</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>baile</td><td>haya bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailes</td><td>hayas bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>baile</td><td>haya bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>baile</td><td>haya bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailemos</td><td>hayamos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailéis</td><td>hayáis bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailen</td><td>hayan bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailen</td><td>hayan bailado </td></tr><tr><th></th><th></th><th></th><th colspan="2">Pretérito imperfecto / Pretérito</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td colspan="2">bailara <span class="ou">o</span> bailase</td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td colspan="2">bailaras <span class="ou">o</span> bailases</td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td colspan="2">bailara <span class="ou">o</span> bailase</td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td colspan="2">bailara <span class="ou">o</span> bailase</td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td colspan="2">bailáramos <span class="ou">o</span> bailásemos</td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td colspan="2">bailarais <span class="ou">o</span> bailaseis</td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td colspan="2">bailaran <span class="ou">o</span> bailasen</td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td colspan="2">bailaran <span class="ou">o</span> bailasen</td></tr><tr><th></th><th></th><th></th><th colspan="2">Pretérito pluscuamperfecto / Antepretérito</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td colspan="2">hubiera <span class="ou">o</span> hubiese bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td colspan="2">hubieras <span class="ou">o</span> hubieses bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td colspan="2">hubiera <span class="ou">o</span> hubiese bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td colspan="2">hubiera <span class="ou">o</span> hubiese bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td colspan="2">hubiéramos <span class="ou">o</span> hubiésemos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td colspan="2">hubierais <span class="ou">o</span> hubieseis bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td colspan="2">hubieran <span class="ou">o</span> hubiesen bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td colspan="2">hubieran <span class="ou">o</span> hubiesen bailado </td></tr><tr><th></th><th></th><th></th><th>Futuro simple / Futuro</th><th>Futuro compuesto / Antefuturo</th></tr><tr><td data-g="Singular"></td><td data-g="Primera"></td><td title="Primera persona de singular">yo</td><td>bailare</td><td>hubiere bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td>bailares</td><td>hubieres bailado </td></tr><tr><td></td><td></td><td title="Singular de cortesía">usted</td><td>bailare</td><td>hubiere bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de singular">él, ella</td><td>bailare</td><td>hubiere bailado </td></tr><tr><td data-g="Plural"></td><td data-g="Primera"></td><td title="Primera persona de plural">nosotros, nosotras</td><td>bailáremos</td><td>hubiéremos bailado </td></tr><tr><td></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td>bailareis</td><td>hubiereis bailado </td></tr><tr><td></td><td></td><td title="Plural de cortesía">ustedes</td><td>bailaren</td><td>hubieren bailado </td></tr><tr><td></td><td data-g="Tercera"></td><td title="Tercera persona de plural">ellos, ellas</td><td>bailaren</td><td>hubieren bailado </td></tr><tr><th></th><th></th><th></th><th colspan="2">Imperativo</th></tr><tr><th>Número</th><th>Personas del discurso</th><th>Pronombres personales</th><th></th><th></th></tr><tr><td data-g="Singular"></td><td data-g="Segunda"></td><td title="Segunda persona de singular">tú / vos</td><td colspan="2">baila / bailá</td></tr><tr><td></td><td></td><td title="Forma singular de cortesía">usted</td><td colspan="2">baile</td></tr><tr><td data-g="Plural"></td><td data-g="Segunda"></td><td title="Segunda persona de plural">vosotros, vosotras</td><td colspan="2">bailad</td></tr><tr><td></td><td></td><td title="Forma plural de cortesía">ustedes</td><td colspan="2">bailen</td></tr></tbody></table>'''  # Insert the HTML content you provided here

# Parse the HTML with BeautifulSoup
soup = BeautifulSoup(html, 'html.parser')

# Initialize JSON structure
json_table = {
    "type": "structured-content",
    "content": []
}

# Parse headers
thead = soup.find("thead")
if thead:
    json_thead = {"tag": "thead", "content": []}
    for tr in thead.find_all("tr"):
        json_tr = {"tag": "tr", "content": []}
        for th in tr.find_all("th"):
            json_th = {"tag": "th", "content": th.get_text(strip=True)}
            if th.has_attr("colspan"):
                json_th["colSpan"] = int(th["colspan"])
            if th.has_attr("rowspan"):
                json_th["rowSpan"] = int(th["rowspan"])
            json_tr["content"].append(json_th)
        json_thead["content"].append(json_tr)
    json_table["content"].append(json_thead)

# Parse body
tbody = soup.find("tbody")
json_tbody = {"tag": "tbody", "content": []}

for tr in tbody.find_all("tr"):
    json_tr = {"tag": "tr", "content": []}
    for td in tr.find_all(["td", "th"]):
        cell = {
            "tag": "td" if td.name == "td" else "th",
            "content": td.get_text(strip=True)
        }
        # Check for colspan and rowspan attributes
        if td.has_attr("colspan"):
            cell["colSpan"] = int(td["colspan"])
        if td.has_attr("rowspan"):
            cell["rowSpan"] = int(td["rowspan"])
        json_tr["content"].append(cell)
    json_tbody["content"].append(json_tr)

# Append tbody to the table content
json_table["content"].append(json_tbody)

# Convert the dictionary to JSON
json_output = json.dumps(json_table, indent=4, ensure_ascii=False)
print(json_output)
